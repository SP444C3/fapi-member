!function(){"use strict";var e={n:function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},d:function(t,r){for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.blocks;function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},r.apply(this,arguments)}var o=window.wp.element,n=window.wp.i18n,i=window.wp.components,a=window.wp.blockEditor,s=window.wp.apiFetch,p=e.n(s);const{useState:l,useEffect:c}=wp.element;let f=[];const u="undefined"==typeof AbortController?void 0:new AbortController;var m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"fapi-member/fapi-form-block","title":"FAPI form","category":"fapi","version":"0.1.1","description":"FAPI form widget.","icon":"cart","supports":{"html":false},"keywords":["fapi","form"],"attributes":{"path":{"type":"string","source":"attribute","selector":"script","attribute":"path"}},"textdomain":"fapi-member","editorScript":"file:../../../../build/fapi-form-block.js","editorStyle":"file:../../../../build/fapi-form-block.css","style":"file:../../../../build/fapi-form-block.css"}');const{name:b,...d}=m;(0,t.registerBlockType)(b,{...d,edit:function(e){let{attributes:t,setAttributes:s}=e;t.path||s({path:""});const[m,b]=l(t.path),[d,h]=l(!1),w=(0,a.useBlockProps)(),v=f.find((e=>""!==t.path&&e.value===t.path));return c((()=>{p()({path:"/?rest_route=/fapi/v1/list-forms",signal:null==u?void 0:u.signal}).then((e=>{f=e,f.unshift({label:(0,n.__)("-- vyberte prodejní formulář --","fapi-member"),value:""}),h(!0)})).catch((e=>{f=[],console.error(e),"AbortError"===e.name&&console.error("Request has been aborted")}))}),"formOptions"),(0,o.createElement)("div",r({},w,{style:{"text-align":"center"}}),(0,o.createElement)(a.InspectorControls,{key:"setting"},(0,o.createElement)("div",{id:"fapi-form-controls"},(0,o.createElement)(i.SelectControl,{label:(0,n.__)("Vyberte prodejní formulář","fapi-member"),value:m,options:f,onChange:e=>{s({path:e,newPath:e}),b(e)}}))),d,v?sprintf((0,n.__)('<<< Zde bude prodejní formulář "%s" >>>',"fapi-member"),v.label):(0,n.__)("<<< Vyberte prodejní formulář z bočního menu >>>","fapi-member"))},save:function(e){const t=a.useBlockProps.save();return(0,o.createElement)("script",r({type:"text/javascript",src:"https://form.fapi.cz/script.php?id="+e.attributes.path},t,{path:e.attributes.path}))}})}();