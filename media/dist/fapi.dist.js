!function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),document.addEventListener("click",(e=>{if(e.target.matches(".levels .remove")){let t=e.target.parentNode.getAttribute("data-id");Swal.fire({html:"<strong>Opravdu si přejete odstranit členskou sekci/úroveň?</strong><br><br>Smazáním sekce/úrovně nedojde ke smazání stránek v sekci/úrovni.",showDenyButton:!0,confirmButtonText:"Smazat",denyButtonText:"Ponechat",customClass:{confirmButton:"removeConfirmButton",denyButton:"removeDenyButton"}}).then((e=>{if(e.isConfirmed){let e=document.getElementById("LevelRemoveForm");e.querySelector('[name="level_id"]').setAttribute("value",t),e.submit()}else e.isDenied}))}})),document.addEventListener("click",(e=>{if(e.target.matches(".levels .edit")){let t=e.target.parentNode.getAttribute("data-name"),n=e.target.parentNode.getAttribute("data-id");Swal.fire({input:"text",inputLabel:"Nový název",inputValue:t,showDenyButton:!0,confirmButtonText:"Přejmenovat",denyButtonText:"Ponechat",customClass:{confirmButton:"renameConfirmButton",denyButton:"renameDenyButton"}}).then((e=>{if(e.isConfirmed){let t=document.getElementById("LevelEditForm");t.querySelector('[name="level_id"]').setAttribute("value",n),t.querySelector('[name="name"]').setAttribute("value",e.value),t.submit()}else e.isDenied}))}})),document.addEventListener("click",(t=>{if(t.target.matches("form.pages button")){t.preventDefault();let n=e(),a=t.target.closest("form");a.querySelector('[name="level_id"]').value=n,a.submit()}})),document.addEventListener("click",(e=>{(e.target.matches(".oneEmail .carret")||e.target.matches(".oneEmail .header h3"))&&e.target.closest(".oneEmail").classList.toggle("open")})),document.addEventListener("click",(e=>{if(e.target.matches(".specifyLevelEmailCheckbox")){let t=e.target.closest(".oneEmail").querySelector(".body > p"),n=e.target.closest(".oneEmail").querySelector("#mail_subject"),a=e.target.closest(".oneEmail").querySelector("#mail_body"),r=e.target.closest(".oneEmail").querySelector(".inputs");e.target.checked?(t.classList.add("hidden"),n.removeAttribute("readonly"),a.removeAttribute("readonly"),r.classList.remove("collapsed")):(t.classList.remove("hidden"),n.value="",a.value="",n.setAttribute("readonly",!0),a.setAttribute("readonly",!0),r.classList.add("collapsed"))}})),document.addEventListener("click",(e=>{(e.target.matches(".shortcodes h3")||e.target.matches(".shortcodes h3 .carret"))&&e.target.closest(".shortcodes").classList.toggle("open")}));const e=()=>{let e=document.querySelector(".levels li.selected");return e?parseInt(e.getAttribute("data-id")):null},t=()=>{let e=document.querySelectorAll(".fapiMembership");e.length<=0||Array.from(e).forEach((e=>{let t=e.querySelectorAll(".isUnlimitedInput");Array.from(t).forEach((t=>{let n=t.getAttribute("name").replace("isUnlimited","membershipUntil"),a=e.querySelector('[name="'+n+'"]'),r=e.querySelector('[data-for="'+n+'"]');t.checked?(a.classList.add("contentHidden"),r.classList.add("contentHidden")):(a.classList.remove("contentHidden"),r.classList.remove("contentHidden"))}))}))};document.addEventListener("click",(e=>{e.target.matches(".fapiMembership .isUnlimitedInput")&&t()})),document.addEventListener("change",(e=>{if(e.target.matches('.fapiMembership input[type="checkbox"]')&&!1===e.target.checked){let t=e.target.name;if(!1===/\[check]/.test(t))return;let n=/Levels\[([0-9]*)]\[check]/.exec(t)[1];document.querySelector(`[name="Levels[${n}][registrationDate]"]`).value="",document.querySelector(`[name="Levels[${n}][registrationTime]"]`).value="00:00",document.querySelector(`[name="Levels[${n}][membershipUntil]"]`).value="",document.querySelector(`[name="Levels[${n}][isUnlimited]"]`).checked=!1}})),document.addEventListener("DOMContentLoaded",t),document.addEventListener("click",(e=>{if(!e.target.matches(".levels .up")&&!e.target.matches(".levels .down"))return;let t=e.target.matches(".levels .up")?"up":"down",n=e.target.parentNode.getAttribute("data-id"),a=document.getElementById("LevelOrderForm");a.querySelector('[name="id"]').setAttribute("value",n),a.querySelector('[name="direction"]').setAttribute("value",t),a.submit()})),window.onload=function(){new ClipboardJS(".copy-to-clipboard")},document.addEventListener("DOMContentLoaded",(()=>{let e=document.getElementsByClassName("mainLevel");for(i=0;i<e.length;i++)e[i].addEventListener("click",(function(){let e=this.nextElementSibling;"0px"!=e.style.maxHeight?e.style.maxHeight="0px":e.style.maxHeight=e.scrollHeight+"px"}))}));"settingsElements"===new URL(window.location.href).searchParams.get("subpage")&&document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("levels"),t=document.getElementById("level-unlock-shortcode");jQuery("#custom-classes").on("input",(function(){!function(e){let t=e.value;/^[0-9a-zA-Z-_]+$/.test(t)||(e.value=t.replace(/[^0-9a-zA-Z-_]/g,""))}(this)}));var n={init:function(e){(e=e||{}).tags=e.tags||[];var t=jQuery(this),n=new RegExp(",","g");t.wrap('<div class="tag-cloud" />'),t.parents(".tag-cloud").click((function(){t.focus()}));var a=function(e){if(""!==(e=e.replace(n,""))){var a=jQuery('<div class="tag"><span class="classTag">'+e+"</span></div>"),r=jQuery('<a class="close">Delete</a>');r.click((function(e){e.preventDefault(),r.parent().remove()})),a.append(r),a.insertBefore(t)}};t.blur((function(){a(this.value),this.value=""})),t.keyup((function(e){var t=e.keyCode,n=8==t;(13==t||188==t)&&(a(this.value),this.value=""),n&&jQuery(this).data("delete-prev")?(jQuery(this).prev().remove(),jQuery(this).data("delete-prev",!1)):n&&""===this.value&&jQuery(this).data("delete-prev",!0)})),jQuery.each(e.tags,(function(e,t){a(t)}))},get:function(){return jQuery(".tag span",this.parent()).map((function(){return jQuery(this).text()}))},clear:function(){jQuery("div",this).remove()}};jQuery.fn.tagcloud=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void jQuery.error("Method "+e+" does not exist on tagcloud plugin"):n.init.apply(this,arguments)},jQuery("#custom-classes").tagcloud({tags:[]}),jQuery("#custom-classes").tagcloud("get"),jQuery("#generateButton").click((function(){!function(e,t){const n=jQuery(".classTag");levelId=e.value,0===n.length?cssClassText="":(cssClassText=' cssclasses="',jQuery(".classTag").each(((e,t)=>{n.length-1!==e?cssClassText=cssClassText+t.outerText+" ":cssClassText+=t.outerText}))),levelId?t.innerHTML='[fapi-member-level-unlock-button level="'+levelId+'"'+cssClassText+'"]':t.innerHTML="Zde se zobrazí shortcode"}(e,t)}))}))}();